import random
from typing import List

class SupportPhrasesService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º–∏ —Ñ—Ä–∞–∑–∞–º–∏"""
    
    def __init__(self):
        self._phrases = self._load_phrases()
    
    def _load_phrases(self) -> List[str]:
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Ñ—Ä–∞–∑ –∏–∑ —Ñ–∞–π–ª–∞"""
        try:
            with open("—Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Ñ—Ä–∞–∑.txt", "r", encoding="utf-8") as file:
                phrases = []
                for line in file:
                    phrase = line.strip()
                    if phrase:  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                        phrases.append(phrase)
                return phrases
        except FileNotFoundError:
            # –ó–∞–ø–∞—Å–Ω–æ–π —Å–ø–∏—Å–æ–∫ —Ñ—Ä–∞–∑ –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–∞–π–ª–∞
            return [
                "–£ —Ç–µ–±—è –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è üí™",
                "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚úÖ",
                "–í–ø–µ—Ä—ë–¥ üöÄ",
                "–¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è üëç",
                "–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å üåü",
                "–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚úîÔ∏è",
                "–ü—Ä–æ–¥–æ–ª–∂–∞–π üí°",
                "–û—Ç–ª–∏—á–Ω–æ –∏–¥—ë—à—å üìà",
                "–í–µ—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚úÖ",
                "–û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä üåø"
            ]
    
    def get_random_phrase(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â—É—é —Ñ—Ä–∞–∑—É"""
        return random.choice(self._phrases)
    
    def should_show_support_phrase(self, words_answered: int) -> bool:
        """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â—É—é —Ñ—Ä–∞–∑—É
        
        Args:
            words_answered: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
            
        Returns:
            True –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ—Ä–∞–∑—É (–∫–∞–∂–¥—ã–µ 3 —Å–ª–æ–≤–∞)
        """
        return words_answered > 0 and words_answered % 3 == 0
    
    def get_support_message(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–π —Ñ—Ä–∞–∑–æ–π"""
        phrase = self.get_random_phrase()
        return f"{phrase}"

# –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–µ—Ä–≤–∏—Å–∞
support_phrases_service = SupportPhrasesService()
